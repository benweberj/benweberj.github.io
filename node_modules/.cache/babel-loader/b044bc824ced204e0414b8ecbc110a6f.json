{"ast":null,"code":"// import Particle from './Particle'\nexport default (p => {\n  let canvas;\n  let bg;\n  let color;\n  let particles;\n  let birds;\n  let particleCount;\n  let connectionDist;\n  let attraction;\n  let attractionDist;\n  let repulseMultiplier;\n\n  p.preload = _ => {// birds = p.loadSound('birds.mp3')\n  };\n\n  p.setup = _ => {\n    canvas = p.createCanvas(p.windowWidth * .8, p.windowHeight * .8);\n    bg = '#111';\n    color = '#fff';\n    particles = [];\n    particleCount = 100;\n    connectionDist = 200;\n    attraction = 3;\n    attractionDist = 200;\n    repulseMultiplier = 5; // birds.play()\n\n    for (let i = 0; i < particleCount; i++) {\n      particles.push(new Particle(p));\n    }\n  };\n\n  p.draw = _ => {\n    p.background(bg);\n    let mouse = p.createVector(p.mouseX, p.mouseY);\n    particles.forEach(particle => {\n      particle.update(color); // let mouseDist = particle.pos.dist(mouse)\n      // if (mouseDist < attractionDist) {\n      //   let dir = mouse.copy().sub(particle.pos)\n      //   if (p.mouseIsPressed) {\n      //     dir.mult(-repulseMultiplier)\n      //   }\n      //   particle.applyForce(dir.mult(attraction))\n      // }\n\n      particles.forEach(other => {\n        if (particle !== other) {\n          let dist = particle.pos.dist(other.pos);\n          let mouseDist = particle.pos.dist(mouse);\n\n          if (mouseDist < attractionDist) {\n            let dir = mouse.copy().sub(particle.pos);\n\n            if (p.mouseIsPressed) {\n              dir.mult(-repulseMultiplier);\n            }\n\n            dir.mult(.01 * attraction / Math.pow(mouseDist, 2)).limit(10);\n            particle.applyForce(dir);\n          }\n\n          if (dist < connectionDist) {\n            // let stroke = Math.pow(20 / dist, 2);\n            let stroke = map(dist, 0, connectionDist, 0, 1); // stroke = p.constrain(stroke, 0, 2);\n\n            p.stroke(color);\n            p.strokeWeight(stroke);\n            p.line(particle.pos.x, particle.pos.y, other.pos.x, other.pos.y);\n          }\n        }\n      });\n    });\n  };\n\n  const map = (value, x1, y1, x2, y2) => (value - x1) * (y2 - x2) / (y1 - x1) + x2;\n\n  p.windowResized = _ => p.resizeCanvas(p.windowWidth * .8, p.windowHeight * .8);\n\n  p.myCustomRedrawAccordingToNewPropsHandler = newProps => {\n    bg = newProps.theme.complement;\n    color = newProps.theme.base;\n  };\n});\n\nclass Particle {\n  constructor(p) {\n    this.p = p;\n    this.respawn();\n    this.pos = p.createVector(p.random(-100, p.width + 100), p.random(-100, p.height + 100));\n  }\n\n  update(color) {\n    this.pos.add(this.vel);\n    this.checkPos();\n    this.p.strokeWeight(this.size);\n    this.p.stroke(color);\n    this.p.point(this.pos.x, this.pos.y);\n  }\n\n  applyForce(force) {\n    // let dist = force.mag()\n    // let strength = .3 / Math.pow(dist, 2)\n    // strength = this.p.constrain(strength, 0, .0005)\n    // force.setMag(strength)\n    this.vel.add(force);\n  }\n\n  checkPos() {\n    let x = this.pos.x;\n    let y = this.pos.y;\n    let s = 100;\n\n    if (x < 0 - s || x > this.p.width + s || y < 0 - s || y > this.p.height + s) {\n      this.respawn();\n    }\n  }\n\n  respawn() {\n    let rate = this.p.random(.2, 1);\n    this.pos = this.p.createVector(this.p.random(-100, this.p.width + 100), -100);\n    this.vel = this.p.createVector(this.p.random(-rate, rate), this.p.random(0, rate));\n    this.size = this.p.random(2, 7);\n  }\n\n}","map":{"version":3,"sources":["/Users/ben/Repos/react-personal-site/src/sketches/particleMesh.js"],"names":["p","canvas","bg","color","particles","birds","particleCount","connectionDist","attraction","attractionDist","repulseMultiplier","preload","_","setup","createCanvas","windowWidth","windowHeight","i","push","Particle","draw","background","mouse","createVector","mouseX","mouseY","forEach","particle","update","other","dist","pos","mouseDist","dir","copy","sub","mouseIsPressed","mult","Math","pow","limit","applyForce","stroke","map","strokeWeight","line","x","y","value","x1","y1","x2","y2","windowResized","resizeCanvas","myCustomRedrawAccordingToNewPropsHandler","newProps","theme","complement","base","constructor","respawn","random","width","height","add","vel","checkPos","size","point","force","s","rate"],"mappings":"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","sourcesContent":["// import Particle from './Particle'\n\nexport default p => {\n  let canvas\n  let bg\n  let color\n\n  let particles\n  let birds\n  let particleCount\n  let connectionDist\n  let attraction\n  let attractionDist\n  let repulseMultiplier\n\n  p.preload = _ => {\n    // birds = p.loadSound('birds.mp3')\n  }\n\n  p.setup = _ => {\n    canvas = p.createCanvas(p.windowWidth * .8, p.windowHeight * .8)\n    bg = '#111'\n    color= '#fff'\n    particles = []\n    particleCount = 100\n    connectionDist = 200\n    attraction = 3\n    attractionDist = 200\n    repulseMultiplier = 5\n    // birds.play()\n\n    for (let i = 0; i < particleCount; i++) {\n      particles.push(new Particle(p));\n    }\n  }\n\n  p.draw = _ => {\n    p.background(bg)\n\n    let mouse = p.createVector(p.mouseX, p.mouseY)\n    particles.forEach(particle => {\n      particle.update(color)\n      // let mouseDist = particle.pos.dist(mouse)\n      // if (mouseDist < attractionDist) {\n      //   let dir = mouse.copy().sub(particle.pos)\n      //   if (p.mouseIsPressed) {\n      //     dir.mult(-repulseMultiplier)\n      //   }\n      //   particle.applyForce(dir.mult(attraction))\n      // }\n\n      particles.forEach(other => {\n        if (particle !== other) {\n          let dist = particle.pos.dist(other.pos);\n\n          let mouseDist = particle.pos.dist(mouse)\n          if (mouseDist < attractionDist) {\n            let dir = mouse.copy().sub(particle.pos)\n            if (p.mouseIsPressed) {\n              dir.mult(-repulseMultiplier)\n            }\n            dir.mult(.01 * attraction / Math.pow(mouseDist, 2)).limit(10)\n            particle.applyForce(dir)\n          }\n\n          if (dist < connectionDist) {\n            // let stroke = Math.pow(20 / dist, 2);\n            let stroke = map(dist, 0, connectionDist, 0, 1)\n            // stroke = p.constrain(stroke, 0, 2);\n            p.stroke(color)\n            p.strokeWeight(stroke)\n            p.line(particle.pos.x, particle.pos.y, other.pos.x, other.pos.y)\n          }\n        }\n      })\n    })\n  }\n\n  const map = (value, x1, y1, x2, y2) => (value - x1) * (y2 - x2) / (y1 - x1) + x2\n\n  p.windowResized = _ => p.resizeCanvas(p.windowWidth * .8, p.windowHeight * .8)\n\n  p.myCustomRedrawAccordingToNewPropsHandler = newProps => {\n    bg = newProps.theme.complement\n    color = newProps.theme.base\n  }\n}\n\nclass Particle {\n  constructor(p) {\n    this.p = p\n    this.respawn()\n    this.pos = p.createVector(p.random(-100, p.width+100), p.random(-100, p.height+100))\n  }\n\n  update(color) {\n    this.pos.add(this.vel)\n    this.checkPos()\n\n    this.p.strokeWeight(this.size)\n    this.p.stroke(color)\n    this.p.point(this.pos.x, this.pos.y)\n  }\n\n  applyForce(force) {\n    // let dist = force.mag()\n    // let strength = .3 / Math.pow(dist, 2)\n    // strength = this.p.constrain(strength, 0, .0005)\n    // force.setMag(strength)\n    this.vel.add(force)\n  }\n\n  checkPos() {\n    let x = this.pos.x\n    let y = this.pos.y\n    let s = 100\n\n    if ((x < 0 - s) ||\n        (x > this.p.width + s) ||\n        (y < 0 - s) ||\n        (y > this.p.height + s))\n    {\n        this.respawn();\n    }\n  }\n\n  respawn() {\n    let rate = this.p.random(.2, 1)\n    this.pos = this.p.createVector(this.p.random(-100, this.p.width + 100), -100)\n    this.vel = this.p.createVector(this.p.random(-rate, rate), this.p.random(0, rate))\n    this.size = this.p.random(2, 7)\n  }\n}"]},"metadata":{},"sourceType":"module"}